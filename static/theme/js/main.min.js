app={},$(function(){app.dom={$window:$(window),$body:$("body"),$document:$(document),$grid:$(".grid"),$header:$(".header"),$footer:$(".footer")},app.init()}),app.init=function(){$("input[type=checkbox], input[type=radio]").idealRadioCheck(),app.getCard(),app.initNav(),app.questions(),app.masks(),app.benefits(),app.pageMenu(),app.calc(),app.initTabs(),app.constructor(),app.initChosen(),app.footer(),app.about()},app.about=function(){function t(t){n.text(t),o.hide().filter('[data-slide-content="'+t+'"]').show(),i.removeClass("_active").filter('[data-about-pag-item="'+t+'"]').addClass("_active")}var a=$("[data-about]"),n=(a.find("[data-about-counter]"),a.find("[data-about-counter-active]")),e=a.find("[data-about-pag]"),i=a.find("[data-about-pag-item]"),o=a.find("[data-slide-content]"),d=null;d=new Swiper(e,{slidesPerView:4,simulateTouch:!1,nextButton:$("[data-about-slider-next]"),prevButton:$("[data-about-slider-prev]")}),i.hover(function(){t($(this).data("aboutPagItem"))},function(){})},app.footer=function(){function t(){app.dom.$grid.css({marginBottom:app.dom.$window.height()})}t(),app.dom.$window.resize(t)},app.masks=function(){$("[data-mask-phone]").mask("+7 (999) 999-99-99")},app.formatNumber=function(t){return String(t).replace(/(?=\B(?:\d{3})+\b)/g," ")},app.initChosen=function(){$("[data-chosen]").chosen({disable_search_threshold:1e3,no_results_text:"Нет результатов для",width:"100%"})},app.questions=function(){var t=$("[data-questions]"),a=t.find("[data-questions-item]"),n=a.find("[data-questions-item-title]"),e=a.find("[data-questions-item-answer]");$("html").on("click","[data-questions-item-title]",function(){var t=$(this);t.hasClass("_active")?t.closest("[data-questions-item]").find("[data-questions-item-answer]").slideUp(300):(e.slideUp(300),n.removeClass("_active"),t.closest("[data-questions-item]").find("[data-questions-item-answer]").slideDown(300)),t.toggleClass("_active")})},app.initTabs=function(){var t=null,a=null,n=null;$("html").on("click.tabs","[data-tabs-tab]",function(){var e=$(this);e.hasClass("_active")||e.hasClass("_disabled")||(t=e.closest("[data-tabs]"),a=t.find("[data-tabs-tab]"),n=t.find("[data-tabs-content]"),a.removeClass("_active"),e.addClass("_active"),n.hide().filter('[data-tabs-content="'+e.data("tabsTab")+'"]').show())})},app.initNav=function(){$("html").on("click.nav","[data-nav-btn]",function(){var t=$(this);"fade"==t.data("navBtn")?t.closest("[data-nav-block]").find("[data-nav-content]").fadeToggle(500):t.closest("[data-nav-block]").find("[data-nav-content]").slideToggle(500),t.closest("[data-nav-block]").find("[data-nav-btn]").toggleClass("_active"),t.closest("[data-nav-block]").find("[data-nav-text]").toggle()})},app.getCard=function(){var t=$("[data-get-card]"),a=t.find("[data-get-card-form]"),n=t.find("[data-get-card-steps-counter]"),e=t.find("[data-get-card-step]"),i=t.find("[data-get-card-html]"),o=t.find("[data-get-card-text]");$.post(a.attr("action"),a.serialize(),function(t){i.html(t.body),o.text(t.body),i.find("input[type=checkbox], input[type=radio]").idealRadioCheck()},"json"),a.on("submit",function(){return $.post(a.attr("action"),a.serialize(),function(t){i.html(t.body),o.text(t.body),i.find("input[type=checkbox], input[type=radio]").idealRadioCheck()},"json"),!1}),n.on("change",function(){e.hide().slice(0,n.val()).show(),a.trigger("submit")})},app.benefits=function(){function t(t){n.removeClass("_active").filter('[data-benefits-tab="'+t+'"]').addClass("_active"),e.hide().filter('[data-benefits-slide="'+t+'"]').show()}var a=$("[data-benefits]"),n=a.find("[data-benefits-tab]"),e=a.find("[data-benefits-slide]");n.on("click",function(){return!$(this).hasClass("_active")&&void t($(this).data("benefitsTab"))}),n.hover(function(){return!$(this).hasClass("_active")&&void t($(this).data("benefitsTab"))},function(){})},app.pageMenu=function(){function t(){app.dom.$window.scrollTop()>=a.offset().top&&app.dom.$window.scrollTop()<=app.dom.$body.height()-app.dom.$window.height()?a.addClass("_fixed"):a.removeClass("_fixed")}var a=$("[data-page-menu]");if(!a.length)return!1;var n=_.throttle(t,10);app.dom.$window.on("scroll",n),t()},app.constructor=function(){var t=$("[data-constructors-block]"),a=t.find("[data-constructor]"),n=$("[data-constructor-block]");$("[data-block-edit-btn]");return!!a.length&&(a.each(function(){function t(t){s.html($(t.body).html()),c.text(t.body),s.find("input[type=checkbox], input[type=radio]").idealRadioCheck(),n.html(t.body),$(t.body).find("[data-about-pag]").length&&app.about()}var a=$(this),e=a.find("[data-constructor-form]"),i=a.find("[data-constructor-form-save]"),o=a.find("[data-constructor-form-cancel]"),d=a.find("[data-constructor-close]"),s=$('[data-constructor-content="'+a.find("input[name=formName]").val()+'"]'),c=a.find("[data-constructor-code]"),l=a.find("[data-constructor-option]"),r="";$.post(e.attr("action"),e.serialize(),function(a){t(a)},"json"),e.find("[data-chosen]").chosen({disable_search_threshold:1e3,no_results_text:"Нет результатов для",width:"100%"}),e.on("submit",function(){return $.post(e.attr("action"),e.serialize(),function(a){t(a),r=JSON.stringify(e.serializeJSON())},"json"),!1}),i.on("click",function(){setCookie(e.find("input[name=formName]").val(),r,{path:"/"}),a.removeClass("_active"),app.dom.$body.removeClass("_show-form")}),o.on("click",function(){location.reload()}),l.on("change",function(){e.trigger("submit")}),d.on("click",function(){a.removeClass("_active"),app.dom.$body.removeClass("_show-form")})}),void $("html").on("click","[data-block-edit-btn]",function(){var t=$(this);app.dom.$body.addClass("_show-form"),a.removeClass("_active").filter('[data-constructor="'+t.data("blockEditBtn")+'"]').addClass("_active")}))},app.calc=function(){function t(t){var a=t;return a>=u.length&&(a-=u.length),u[a]}function a(){p=parseInt(o.val().replace(new RegExp(" ","g"),""),10),c.text(app.formatNumber(.05*p)),l.text(app.formatNumber(.9*p)),s.each(function(a){var n=$(this),e=+n.data("calcScheduleMonth");n.text(t(+f+e))})}var n=$("[data-calc]"),e=n.find("[data-calc-sum]"),i=e.find("[data-calc-sum-slider]"),o=e.find("[data-calc-sum-inp]"),d=n.find("[data-calc-month-field]"),s=n.find("[data-calc-schedule-month]"),c=n.find("[data-calc-min-payment]"),l=n.find("[data-calc-rest-payment]"),r=i.data("calcSumSlider"),u=["В январе","в Феврале","в Марте","в Апреле","в Мае","в Июне","в Июле"," в Августе","в Сентябре"," в Октябре","в Ноябре","в Декабре"],p=null,f=null,m=null,h=null;return!!n.length&&(f=r.month,d.val(f),d.on("change",function(){f=$(this).val(),a()}),i.slider({range:"min",min:r.min,max:r.max,step:r.step,value:r.value||r.min,slide:function(t,n){a(),o.val(app.formatNumber(n.value))},start:function(t,a){m=a.value},stop:function(t,n){n.value!=m&&(a(),o.val(app.formatNumber(n.value)))}}),o.focus(function(){h=parseInt(o.val().replace(new RegExp(" ","g"),""),10),o.val(h)}).keyup(function(){}),o.val(app.formatNumber(r.value)).change(),o.on("change",function(){var t=parseInt(o.val().replace(new RegExp(" ","g"),""),10)||r.min;h=Math.min(Math.max(r.min,t),r.max),i.slider("value",h),o.val(app.formatNumber(h)),a()}),void a())};